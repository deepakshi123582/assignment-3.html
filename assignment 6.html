<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Travel Packages - Assignment 2</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f7f9fb;
    margin: 0;
    padding: 0;
  }

  header {
    background-color: #007bff;
    color: white;
    padding: 15px 0;
    text-align: center;
  }

  nav a {
    color: white;
    margin: 0 15px;
    text-decoration: none;
  }

  nav a.active {
    border-bottom: 2px solid yellow;
    font-weight: bold;
  }

  section {
    padding: 20px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    margin-top: 10px;
  }

  th, td {
    border: 1px solid #ccc;
    padding: 10px;
    text-align: center;
  }

  th {
    background-color: #007bff;
    color: white;
  }

  form {
    background: white;
    padding: 20px;
    border-radius: 8px;
    width: 60%;
    margin: 20px auto;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }

  input, select {
    width: 95%;
    padding: 8px;
    margin: 8px 0;
    border-radius: 5px;
    border: 1px solid #ccc;
  }

  #total {
    font-weight: bold;
    color: green;
  }

  /* Gallery */
  .gallery {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  .gallery img {
    width: 150px;
    border-radius: 8px;
    cursor: pointer;
  }

  /* Modal */
  #modal {
    display: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.8);
    justify-content: center;
    align-items: center;
  }

  #modal img {
    width: 70%;
    border-radius: 8px;
  }

  #modal span {
    position: absolute;
    top: 20px;
    right: 30px;
    font-size: 25px;
    color: white;
    cursor: pointer;
  }
</style>
</head>

<body>

<header>
  <nav>
    <a href="#packages" class="nav-link active">Packages</a>
    <a href="#booking" class="nav-link">Booking</a>
    <a href="#gallery" class="nav-link">Gallery</a>
  </nav>
</header>

<!-- ðŸ§³ Packages Section -->
<section id="packages">
  <h2>Available Travel Packages</h2>
  <table id="packageTable">
    <thead>
      <tr>
        <th>ID</th>
        <th>Destination</th>
        <th>Duration (Days)</th>
        <th>Base Price ($)</th>
        <th>Season</th>
        <th>Final Price ($)</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</section>

<!-- ðŸ§¾ Booking Form -->
<section id="booking">
  <h2>Booking Price Estimator</h2>
  <form id="bookingForm">
    <label>Package:</label>
    <select id="packageSelect" required></select><br>
    <label>Check-in:</label>
    <input type="date" id="checkIn" required><br>
    <label>Check-out:</label>
    <input type="date" id="checkOut" required><br>
    <label>Guests:</label>
    <input type="number" id="guests" min="1" required><br>
    <label>Promo Code:</label>
    <input type="text" id="promo"><br>
    <p id="total">Total: $0</p>
    <button type="submit" id="submitBtn">Book Now</button>
  </form>
</section>

<!-- ðŸ–¼ï¸ Gallery Section -->
<section id="gallery">
  <h2>Travel Gallery</h2>
  <div class="gallery">
    <img src="https://picsum.photos/id/10/150" data-large="https://picsum.photos/id/10/800" alt="Mountain View" title="Mountain">
    <img src="https://picsum.photos/id/20/150" data-large="https://picsum.photos/id/20/800" alt="Beach View" title="Beach">
    <img src="https://picsum.photos/id/30/150" data-large="https://picsum.photos/id/30/800" alt="City Lights" title="City">
  </div>
</section>

<!-- Modal -->
<div id="modal">
  <span id="closeModal">&times;</span>
  <img id="modalImg" src="">
</div>

<script>
  // ðŸŒ Navigation Highlight
  const navLinks = document.querySelectorAll(".nav-link");
  navLinks.forEach(link => {
    link.addEventListener("click", function() {
      navLinks.forEach(l => l.classList.remove("active"));
      this.classList.add("active");
    });
  });

  // ðŸ“¦ Packages Data
  const packages = [
    { id: 1, destination: "Goa", durationDays: 4, basePrice: 400, season: "Summer" },
    { id: 2, destination: "Manali", durationDays: 5, basePrice: 500, season: "Winter" },
    { id: 3, destination: "Jaipur", durationDays: 3, basePrice: 350, season: "Autumn" },
    { id: 4, destination: "Kerala", durationDays: 6, basePrice: 650, season: "Monsoon" },
  ];

  // ðŸ§® Function to calculate final price
  function calculateFinalPrice(pkg) {
    let multiplier = 1;
    switch(pkg.season) {
      case "Summer": multiplier = 1.2; break;
      case "Winter": multiplier = 1.1; break;
      case "Monsoon": multiplier = 0.9; break;
      default: multiplier = 1;
    }
    let weekendSurcharge = pkg.durationDays > 4 ? 1.05 : 1;
    return (pkg.basePrice * multiplier * weekendSurcharge).toFixed(2);
  }

  // ðŸª„ Render Packages Table
  const tbody = document.querySelector("#packageTable tbody");
  function renderPackages() {
    tbody.innerHTML = "";
    packages.forEach(pkg => {
      const finalPrice = calculateFinalPrice(pkg);
      const row = `<tr>
        <td>${pkg.id}</td>
        <td>${pkg.destination}</td>
        <td>${pkg.durationDays}</td>
        <td>${pkg.basePrice}</td>
        <td>${pkg.season}</td>
        <td>${finalPrice}</td>
      </tr>`;
      tbody.innerHTML += row;
    });
  }
  renderPackages();

  // Fill package dropdown
  const packageSelect = document.getElementById("packageSelect");
  packages.forEach(pkg => {
    const option = document.createElement("option");
    option.value = pkg.id;
    option.textContent = `${pkg.destination} (${pkg.durationDays} days)`;
    packageSelect.appendChild(option);
  });

  // ðŸ§¾ Booking Price Estimator
  const form = document.getElementById("bookingForm");
  const totalDisplay = document.getElementById("total");
  const submitBtn = document.getElementById("submitBtn");

  function calculateTotal() {
    const pkgId = parseInt(packageSelect.value);
    const checkIn = new Date(document.getElementById("checkIn").value);
    const checkOut = new Date(document.getElementById("checkOut").value);
    const guests = parseInt(document.getElementById("guests").value) || 0;
    const promo = document.getElementById("promo").value.trim().toUpperCase();

    if (!pkgId || !checkIn || !checkOut || guests < 1) {
      totalDisplay.textContent = "Total: $0";
      submitBtn.disabled = true;
      return;
    }

    let nights = (checkOut - checkIn) / (1000 * 60 * 60 * 24);
    if (nights <= 0) {
      totalDisplay.textContent = "Invalid date range!";
      submitBtn.disabled = true;
      return;
    }

    let pkg = packages.find(p => p.id === pkgId);
    let basePrice = calculateFinalPrice(pkg);
    let total = basePrice * nights;

    // Guests multiplier
    if (guests > 2) total *= 1.2;

    // Promo codes
    switch(promo) {
      case "EARLYBIRD": total *= 0.9; break;
      case "FESTIVE": total *= 0.85; break;
      default: total *= 1;
    }

    totalDisplay.textContent = `Total: $${total.toFixed(2)}`;
    submitBtn.disabled = false;
  }

  form.addEventListener("input", calculateTotal);
  form.addEventListener("submit", e => {
    e.preventDefault();
    alert("Booking Successful!");
  });

  // ðŸ–¼ï¸ Gallery Modal
  const galleryImgs = document.querySelectorAll(".gallery img");
  const modal = document.getElementById("modal");
  const modalImg = document.getElementById("modalImg");
  const closeModal = document.getElementById("closeModal");

  galleryImgs.forEach(img => {
    img.addEventListener("click", function() {
      modal.style.display = "flex";
      modalImg.src = this.getAttribute("data-large");
      modalImg.alt = this.alt;
      modalImg.title = this.title;
    });
  });

  closeModal.addEventListener("click", () => {
    modal.style.display = "none";
  });
</script>
</body>
</html>
